<div class="container mt-4">
  <div class="row">
    <div class="col-md-4 text-center">
      <img src="{{user.photo_url}}" alt="Avatar" class="rounded-circle mb-3" width="140" height="140">
      <h3>{{user.full_name}}</h3>
      <p class="text-muted">{{user.email}}</p>
      <button class="btn btn-primary" id="editProfileBtn">Редагувати дані</button>
    </div>
    <div class="col-md-8">
      <h4>Особисті дані</h4>
      <table class="table table-borderless">
        <tr><th>Телефон:</th><td>{{user.phone}}</td></tr>
        <tr><th>Дата народження:</th><td>{{user.birth_date}}</td></tr>
        <tr><th>Стать:</th><td>{{user.gender}}</td></tr>
        <tr><th>Місто:</th><td>{{user.city}}</td></tr>
        <tr><th>Країна:</th><td>{{user.country}}</td></tr>
        <tr><th>Дата реєстрації:</th><td>{{user.created_at}}</td></tr>
      </table>
      <div id="editProfileForm" style="display:none;">
        <form method="POST" action="/profile/edit" enctype="multipart/form-data">
          <div class="form-group">
            <label>Ім'я</label>
            <input type="text" class="form-control" name="full_name" value="{{user.full_name}}" required>
          </div>
          <div class="form-group">
            <label>Телефон</label>
            <input type="text" class="form-control" name="phone" value="{{user.phone}}">
          </div>
          <div class="form-group">
            <label>Дата народження</label>
            <input type="date" class="form-control" name="birth_date" value="{{user.birth_date}}">
          </div>
          <div class="form-group">
            <label>Стать</label>
            <select class="form-control" name="gender">
              <option value="male" {{#if (eq user.gender 'male')}}selected{{/if}}>Чоловіча</option>
              <option value="female" {{#if (eq user.gender 'female')}}selected{{/if}}>Жіноча</option>
              <option value="other" {{#if (eq user.gender 'other')}}selected{{/if}}>Інше</option>
            </select>
          </div>
          <div class="form-group">
            <label>Місто</label>
            <input type="text" class="form-control" name="city" value="{{user.city}}">
          </div>
          <div class="form-group">
            <label>Країна</label>
            <input type="text" class="form-control" name="country" value="{{user.country}}">
          </div>
          <div class="form-group">
            <label>Фото</label>
            <input type="file" class="form-control-file" name="photo">
          </div>
          <button type="submit" class="btn btn-success">Зберегти</button>
          <button type="button" class="btn btn-secondary" id="cancelEditProfile">Скасувати</button>
        </form>
      </div>
      <hr>
      <h4>Курси</h4>
      <ul>
        {{#each user.courses}}
          <li>{{this.title}} ({{this.status}})</li>
        {{/each}}
      </ul>
      <h4>Прогрес</h4>
      <ul>
        {{#each user.progress}}
          <li>{{this.course_title}}: {{this.percent}}%</li>
        {{/each}}
      </ul>
      <h4>Сертифікати</h4>
      <ul>
        {{#each user.certificates}}
          <li>{{this.title}} — {{this.date}}</li>
        {{/each}}
      </ul>
    </div>
  </div>
</div>
<script>
document.getElementById('editProfileBtn').onclick = function() {
  document.getElementById('editProfileForm').style.display = 'block';
  this.style.display = 'none';
};
document.getElementById('cancelEditProfile').onclick = function() {
  document.getElementById('editProfileForm').style.display = 'none';
  document.getElementById('editProfileBtn').style.display = 'inline-block';
};
</script>
